(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["snapshotable"],{"0841":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"snapshot-detaile"},[n("div",{staticClass:"edition-center"},[n("div",{staticClass:"left"},[n("el-image",{staticClass:"minted-image",attrs:{src:t.imageItem.uri||t.imageItem.image}})],1),t._v(" "),"mint"===t.imageItem.type||"created"===t.imageItem.type?n("div",{staticClass:"right"},[0==t.status?n("section",{staticClass:"edit"},[n("h1",[t._v("Select Price Curve")]),t._v(" "),n("el-select",{attrs:{disabled:"mint"===t.imageItem.type,size:"mini"},model:{value:t.priceCurve,callback:function(e){t.priceCurve=e},expression:"priceCurve"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),n("div",{style:{width:"300px",height:"300px"},attrs:{id:"myChart"}}),t._v(" "),n("el-form",{staticClass:"set-message",attrs:{disabled:"mint"===t.imageItem.type}},[n("p",{staticClass:"label"},[t._v("Time Limit")]),t._v(" "),n("div",{staticClass:"coordinate-mess"},[n("div",{staticClass:"itme"},[n("span",{staticStyle:{"margin-right":"10px"}},[t._v("From")]),t._v(" "),n("el-input",{attrs:{size:"small"},model:{value:t.birth,callback:function(e){t.birth=e},expression:"birth"}})],1),t._v(" "),n("div",{staticClass:"itme"},[n("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("To")]),t._v(" "),n("el-input",{attrs:{size:"small"},model:{value:t.deadline,callback:function(e){t.deadline=e},expression:"deadline"}})],1)]),t._v(" "),n("p",{staticClass:"label"},[t._v("Copy Limit")]),t._v(" "),n("div",{staticClass:"coordinate-mess size-itme"},[n("div",{staticClass:"itme"},[n("el-input",{attrs:{size:"small"},model:{value:t.totalSupply,callback:function(e){t.totalSupply=e},expression:"totalSupply"}})],1)]),t._v(" "),n("p",{staticClass:"label"},[t._v("Initial Price")]),t._v(" "),n("div",{staticClass:"coordinate-mess size-itme"},[n("div",{staticClass:"itme"},[n("el-input",{attrs:{size:"small"},model:{value:t.initialPrice,callback:function(e){t.initialPrice=e},expression:"initialPrice"}}),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(" ETH")])],1)]),t._v(" "),t.imageItem&&"created"===t.imageItem.type?n("div",{staticClass:"buttons"},[n("p",{staticClass:"btn",on:{click:t.submit}},[t._v("Save")]),t._v(" "),n("p",{staticClass:"btn cancel",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Cancel")])]):t._e(),t._v(" "),t.imageItem&&"mint"===t.imageItem.type?n("div",{staticClass:"buttons"},[n("p",{staticClass:"btn",on:{click:t.mintSubmit}},[t._v("Mint")]),t._v(" "),n("p",{staticClass:"btn cancel",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Cancel")])]):t._e()])],1):t._e(),t._v(" "),-1==t.status?n("section",{staticClass:"loading"},[n("el-image",{attrs:{src:i("82e0")}})],1):t._e(),t._v(" "),1==t.status?n("section",{staticClass:"finished"},[n("p",{staticClass:"title-tip"},[t._v("Finished!")]),t._v(" "),n("p",{staticClass:"title-tip black"},[t._v("The NFT Song")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),n("p",{staticClass:"item-info"},[n("label",[t._v("Collection")]),t._v("Imprint Rarible"),n("span",[t._v("( "+t._s(t.tx.blockHash.substring(0,19))+"..."+t._s(t.tx.blockHash.substring(t.tx.blockHash.length-4,t.tx.blockHash.length))+")")])]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),n("div",{staticClass:"minted-btn",on:{click:function(e){return t.$router.push("home")}}},[t._v("go to Imprint")])]):t._e()]):t._e(),t._v(" "),"show"===t.imageItem.type?n("div",{staticClass:"right"},[n("section",{staticClass:"show"},[n("h2",[t._v("The NFT Song "),n("span",[t._v("The "+t._s(t.snapshotsMinted)+"th Snapshot")])]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),n("div",{staticClass:"chart-box",style:{width:"350px",height:"350px"}},[n("div",{style:{width:"350px",height:"350px"},attrs:{id:"myChart"}}),t._v(" "),n("div",{staticClass:"curve"},[t._v("Price Curve at "+t._s(t.priceCurve))]),t._v(" "),n("div",{staticClass:"tips"},[t._v("Snapshot times")])]),t._v(" "),n("p",{staticClass:"content"},[n("label",[t._v("Price")]),t._v(" "),n("span",[t._v(t._s(t.initialPrice)+" ETH")])]),t._v(" "),n("div",{staticClass:"minted-btn",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Back")])])]):t._e()])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"item-info"},[i("label",[t._v("Owner")]),t._v("zhangsan")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"item-info"},[i("label",[t._v("Time")]),t._v("2021.04.19,08:15pm EST")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"item-info"},[i("label",[t._v("Token ID")]),t._v("23456")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"item-info"},[i("label",[t._v("# of Imprints")]),t._v("1")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"content"},[i("label",[t._v("Owner")]),t._v(" "),i("span",{staticClass:"red"},[t._v("elonmusk")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"content"},[i("label",[t._v("Price Curve")])])}],a=(i("8e6e"),i("ac6a"),i("456d"),i("c5f6"),i("96cf"),i("1da1")),r=i("ade3"),c=i("d06f"),o=i("408b"),l=i("313e"),u=i("5991"),p=i("2f62");function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h={name:"SnapshotDetaile",data:function(){return{status:0,initialPrice:10,totalSupply:100,priceCurve:"const",birth:0,deadline:10,tx:null,options:[{value:"const",label:"Price curve at const"},{value:"linear",label:"Price curve at linear"},{value:"exp",label:"Price curve at exp"},{value:"quad",label:"Price curve at quad"}],snapshotsMinted:0,imageItem:null,chart:null}},computed:d({},Object(p["c"])({contractAddress:function(t){return t.contract["contractAddress"]},mosaique:function(t){return t.contract["CollectionContract"].mosaique},userAddress:function(t){return t.walletAccount["userAddress"]},formatEth:function(t){return t.walletAccount.formatEth}})),watch:{priceCurve:function(){this.drawLine()},totalSupply:function(){this.drawLine()},initialPrice:function(){this.drawLine()}},mounted:function(){this.drawLine()},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.imageItem=this.$route.query,this.imageItem.token_id=Number(this.imageItem.token_id),this.init();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{init:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i,n,s,a,r,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["d"](this.imageItem.token_id,this.imageItem.contractAddr);case 2:e=t.sent,i=e.birth,n=e.deadline,s=e.initialPrice,a=e.priceCurve,r=e.totalSupply,o=e.snapshotsMinted,l={"0x636f6e7374000000000000000000000000000000000000000000000000000000":"const","0x6c696e6561720000000000000000000000000000000000000000000000000000":"linear","0x6578700000000000000000000000000000000000000000000000000000000000":"exp","0x7175616400000000000000000000000000000000000000000000000000000000":"quad"},this.initialPrice=s,this.snapshotsMinted=o,this.totalSupply=r,this.birth=i,this.deadline=n,this.priceCurve=l[a],console.log("getSnapshotStatus",c["b"].utils.toAscii(a.substr(0,16)));case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sign:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i,n,s,a,r,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.initialPrice,i=this.totalSupply,n=this.priceCurve,s=this.birth,a=this.deadline,r=String(c["b"].utils.fromAscii(n)),r.length<66)for(o=r.length;o<66;o++)r+="0";return console.log(r,"priceCurve66"),t.next=6,u["f"]([this.imageItem.contractAddr,Number(this.imageItem.token_id),e,i,r,s,a],["address","uint256","uint256","uint256","bytes32","uint256","uint256"]);case 6:return l=t.sent,console.log(l,"signature"),t.abrupt("return",l);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mintSign:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log([this.imageItem.contractAddr,this.imageItem.token_id,e],"[this.imageItem.contractAddr, this.imageItem.token_id, newTokenURI]"),t.next=3,u["f"]([this.imageItem.contractAddr,this.imageItem.token_id,e],["address","uint256","string"]);case 3:return i=t.sent,console.log(i,"signature"),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),loadingTransferHash:function(t,e){var i=this;return console.log("loadingTransferHash"),c["a"].getTransactionReceipt(t).then((function(n){if(console.log(n,"res"),null!==n&&0!==n)return i.status=e,i.tx=n,!0;setTimeout((function(){return i.loadingTransferHash(t,e)}),1e3)})).catch((function(t){return console.log(t),!1}))},submit:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i,n,s,a,r,l,u,p=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.status=-1,e=this.initialPrice,i=this.totalSupply,n=this.priceCurve,s=this.birth,a=this.deadline,t.next=4,this.sign(this.imageItem.nft_mid);case 4:if(r=t.sent,l=String(c["b"].utils.fromAscii(n)),l.length<66)for(u=l.length;u<66;u++)l+="0";console.log(l,"priceCurve66"),o["b"]({owner:this.userAddress,signature:r,contract:this.imageItem.contractAddr,token_id:this.imageItem.token_id,initialPrice:e,totalSupply:i,priceCurve:l,birth:s,deadline:a}).then((function(t){p.loadingTransferHash(t.data.data,1)}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mintSubmit:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i,n,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.status=-1,e=u["a"](this.imageItem.contractAddr),t.next=4,e.methods.tokenURI(this.imageItem.token_id).call();case 4:return i=t.sent,console.log(i),t.next=8,this.mintSign(i);case 8:n=t.sent,o["a"]({requester:this.userAddress,signature:n,contract:this.imageItem.contractAddr,token_id:this.imageItem.token_id,newTokenURI:i}).then((function(t){s.loadingTransferHash(t.data.data,1)}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),drawLine:function(){var t=this.priceCurve||"const";this.chart=l["a"](document.getElementById("myChart"));for(var e=this.totalSupply,i=20,n={const:function(t){return 1*i},linear:function(t){return 1.2*t+i},exp:function(t){return Math.exp(t/e)+i},quad:function(t){return Math.pow(t/e,2)+i}},s=[],a=[],r=0;r<=e;r++)a.push(r),s.push(n[t](r));var c={xAxis:{type:"category",min:0,max:e,data:a},yAxis:{type:"value",min:i-10},series:[{color:"#da6464",data:s,showSymbol:!1,type:"line",smooth:!0}]};this.chart.setOption(c)}}},v=h,f=(i("142a"),i("2877")),g=Object(f["a"])(v,n,s,!1,null,null,null);e["default"]=g.exports},"142a":function(t,e,i){"use strict";var n=i("c392"),s=i.n(n);s.a},"41a1":function(t,e,i){"use strict";var n=i("eb51"),s=i.n(n);s.a},"75db":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"snapshotable"},[n("div",{staticClass:"edition-center"},[n("div",{staticClass:"snapshotable-title"},[t._v("Snapshotables")]),t._v(" "),n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"img-list",staticStyle:{overflow:"auto"},attrs:{"infinite-scroll-disabled":t.scrollDisabled}},t._l(t.imagList,(function(e){return n("div",{key:e.nft_mid,staticClass:"item-card",on:{click:function(i){return t.toDetaile(e)}}},[n("div",{staticClass:"top"},[n("el-image",{staticClass:"img",attrs:{fit:"cover",src:e.uri}}),t._v(" "),n("div",{staticClass:"mark-box"},[n("div",{staticClass:"mark",style:{backgroundImage:"url("+e.uri+")"}}),t._v(" "),n("div",{staticClass:"info"},[n("p",{staticClass:"title"},[t._v("Artwork title")]),t._v(" "),n("div",{staticClass:"user"},[n("el-image",{attrs:{src:i("768b")}}),t._v(" "),n("span",[t._v("Collector name")])],1)])])],1),t._v(" "),n("div",{staticClass:"bottom"},[n("div",{staticClass:"bt-item"},[n("p",{staticClass:"bt-title"},[t._v("Snapshot")]),t._v(" "),n("p",{staticClass:"value"},[t._v(t._s(e.minted_count)+"/"+t._s(e.supply))])])])])})),0)])])},s=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("2909")),r=(i("96cf"),i("1da1")),c=i("ade3"),o=i("408b"),l=i("2f62");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){Object(c["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m={name:"Snapshotable",data:function(){return{imagList:[],scrollDisabled:!1,skip:1,limit:10}},computed:p({},Object(l["c"])({contractAddress:function(t){return t.contract["contractAddress"]},mosaique:function(t){return t.contract["CollectionContract"].mosaique},userAddress:function(t){return t.walletAccount["userAddress"]},formatEth:function(t){return t.walletAccount.formatEth}})),created:function(){this.getList()},methods:{load:function(){this.skip++,this.getList()},toDetaile:function(t){var e="";e=t.address===this.userAddress?"show":"mint",this.$router.push({path:"/snapshot-detaile",query:p({token_id:t.token_id,contractAddr:t.contract,image:t.uri,type:e},t)})},getList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["i"]({skip:this.skip,limit:this.limit}).then((function(t){return e.imagList=[].concat(Object(a["a"])(e.imagList),Object(a["a"])(t.data.snapshots)),t.data.snapshots.length<10&&(e.scrollDisabled=!0),t.data.snapshots}));case 2:t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},d=m,h=(i("41a1"),i("2877")),v=Object(h["a"])(d,n,s,!1,null,null,null);e["default"]=v.exports},"768b":function(t,e,i){t.exports=i.p+"static/img/img-1@2x.75c19311.png"},"82e0":function(t,e,i){t.exports=i.p+"static/img/Loading_20210708.31344e8f.gif"},c392:function(t,e,i){},eb51:function(t,e,i){}}]);